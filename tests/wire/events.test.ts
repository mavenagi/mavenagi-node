/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool";
import * as MavenAGI from "../../src/api/index";
import { MavenAGIClient } from "../../src/Client";

describe("Events", () => {
    test("search", async () => {
        const server = mockServerPool.createServer();
        const client = new MavenAGIClient({
            appId: "test",
            appSecret: "test",
            organizationId: "test",
            agentId: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            events: [
                {
                    eventType: "userEvent",
                    id: {
                        organizationId: "organizationId",
                        agentId: "agentId",
                        type: "AGENT",
                        appId: "appId",
                        referenceId: "referenceId",
                    },
                    eventName: "BUTTON_CLICKED",
                    userInfo: {
                        id: {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    },
                    feedbackInfo: [
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: { surveyQuestion: "surveyQuestion", surveyAnswer: "surveyAnswer" },
                        },
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: { surveyQuestion: "surveyQuestion", surveyAnswer: "surveyAnswer" },
                        },
                    ],
                    pageInfo: {
                        pageName: "pageName",
                        pageUrl: "pageUrl",
                        pageTitle: "pageTitle",
                        linkUrl: "linkUrl",
                        elementId: "elementId",
                    },
                    timestamp: "2024-01-15T09:30:00Z",
                    references: [
                        {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    ],
                    sourceInfo: {
                        type: "WEB",
                        deviceInfo: {
                            type: "DESKTOP",
                            name: "name",
                            version: "version",
                            osInfo: { type: "WINDOWS", name: "name", version: "version" },
                        },
                        browserInfo: { type: "CHROME", name: "name", version: "version", userAgent: "userAgent" },
                        geoInfo: {
                            city: "city",
                            state: "state",
                            country: "country",
                            region: "region",
                            latitude: 1.1,
                            longitude: 1.1,
                        },
                        ipInfo: { ip: "ip" },
                        languageInfo: { code: "code" },
                    },
                    sessionInfo: {
                        id: "id",
                        start: "2024-01-15T09:30:00Z",
                        end: "2024-01-15T09:30:00Z",
                        duration: 1000000,
                    },
                    contextInfo: { additionalData: { additionalData: "additionalData" } },
                },
                {
                    eventType: "userEvent",
                    id: {
                        organizationId: "organizationId",
                        agentId: "agentId",
                        type: "AGENT",
                        appId: "appId",
                        referenceId: "referenceId",
                    },
                    eventName: "BUTTON_CLICKED",
                    userInfo: {
                        id: {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    },
                    feedbackInfo: [
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: { surveyQuestion: "surveyQuestion", surveyAnswer: "surveyAnswer" },
                        },
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: { surveyQuestion: "surveyQuestion", surveyAnswer: "surveyAnswer" },
                        },
                    ],
                    pageInfo: {
                        pageName: "pageName",
                        pageUrl: "pageUrl",
                        pageTitle: "pageTitle",
                        linkUrl: "linkUrl",
                        elementId: "elementId",
                    },
                    timestamp: "2024-01-15T09:30:00Z",
                    references: [
                        {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    ],
                    sourceInfo: {
                        type: "WEB",
                        deviceInfo: {
                            type: "DESKTOP",
                            name: "name",
                            version: "version",
                            osInfo: { type: "WINDOWS", name: "name", version: "version" },
                        },
                        browserInfo: { type: "CHROME", name: "name", version: "version", userAgent: "userAgent" },
                        geoInfo: {
                            city: "city",
                            state: "state",
                            country: "country",
                            region: "region",
                            latitude: 1.1,
                            longitude: 1.1,
                        },
                        ipInfo: { ip: "ip" },
                        languageInfo: { code: "code" },
                    },
                    sessionInfo: {
                        id: "id",
                        start: "2024-01-15T09:30:00Z",
                        end: "2024-01-15T09:30:00Z",
                        duration: 1000000,
                    },
                    contextInfo: { additionalData: { additionalData: "additionalData" } },
                },
            ],
            number: 1,
            size: 1,
            totalElements: 1000000,
            totalPages: 1,
        };
        server
            .mockEndpoint()
            .post("/v1/events/search")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.events.search({});
        expect(response).toEqual({
            events: [
                {
                    eventType: "userEvent",
                    id: {
                        organizationId: "organizationId",
                        agentId: "agentId",
                        type: "AGENT",
                        appId: "appId",
                        referenceId: "referenceId",
                    },
                    eventName: "BUTTON_CLICKED",
                    userInfo: {
                        id: {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    },
                    feedbackInfo: [
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: {
                                surveyQuestion: "surveyQuestion",
                                surveyAnswer: "surveyAnswer",
                            },
                        },
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: {
                                surveyQuestion: "surveyQuestion",
                                surveyAnswer: "surveyAnswer",
                            },
                        },
                    ],
                    pageInfo: {
                        pageName: "pageName",
                        pageUrl: "pageUrl",
                        pageTitle: "pageTitle",
                        linkUrl: "linkUrl",
                        elementId: "elementId",
                    },
                    timestamp: "2024-01-15T09:30:00Z",
                    references: [
                        {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    ],
                    sourceInfo: {
                        type: "WEB",
                        deviceInfo: {
                            type: "DESKTOP",
                            name: "name",
                            version: "version",
                            osInfo: {
                                type: "WINDOWS",
                                name: "name",
                                version: "version",
                            },
                        },
                        browserInfo: {
                            type: "CHROME",
                            name: "name",
                            version: "version",
                            userAgent: "userAgent",
                        },
                        geoInfo: {
                            city: "city",
                            state: "state",
                            country: "country",
                            region: "region",
                            latitude: 1.1,
                            longitude: 1.1,
                        },
                        ipInfo: {
                            ip: "ip",
                        },
                        languageInfo: {
                            code: "code",
                        },
                    },
                    sessionInfo: {
                        id: "id",
                        start: "2024-01-15T09:30:00Z",
                        end: "2024-01-15T09:30:00Z",
                        duration: 1000000,
                    },
                    contextInfo: {
                        additionalData: {
                            additionalData: "additionalData",
                        },
                    },
                },
                {
                    eventType: "userEvent",
                    id: {
                        organizationId: "organizationId",
                        agentId: "agentId",
                        type: "AGENT",
                        appId: "appId",
                        referenceId: "referenceId",
                    },
                    eventName: "BUTTON_CLICKED",
                    userInfo: {
                        id: {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    },
                    feedbackInfo: [
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: {
                                surveyQuestion: "surveyQuestion",
                                surveyAnswer: "surveyAnswer",
                            },
                        },
                        {
                            rating: 1.1,
                            thumbUp: true,
                            survey: {
                                surveyQuestion: "surveyQuestion",
                                surveyAnswer: "surveyAnswer",
                            },
                        },
                    ],
                    pageInfo: {
                        pageName: "pageName",
                        pageUrl: "pageUrl",
                        pageTitle: "pageTitle",
                        linkUrl: "linkUrl",
                        elementId: "elementId",
                    },
                    timestamp: "2024-01-15T09:30:00Z",
                    references: [
                        {
                            organizationId: "organizationId",
                            agentId: "agentId",
                            type: "AGENT",
                            appId: "appId",
                            referenceId: "referenceId",
                        },
                    ],
                    sourceInfo: {
                        type: "WEB",
                        deviceInfo: {
                            type: "DESKTOP",
                            name: "name",
                            version: "version",
                            osInfo: {
                                type: "WINDOWS",
                                name: "name",
                                version: "version",
                            },
                        },
                        browserInfo: {
                            type: "CHROME",
                            name: "name",
                            version: "version",
                            userAgent: "userAgent",
                        },
                        geoInfo: {
                            city: "city",
                            state: "state",
                            country: "country",
                            region: "region",
                            latitude: 1.1,
                            longitude: 1.1,
                        },
                        ipInfo: {
                            ip: "ip",
                        },
                        languageInfo: {
                            code: "code",
                        },
                    },
                    sessionInfo: {
                        id: "id",
                        start: "2024-01-15T09:30:00Z",
                        end: "2024-01-15T09:30:00Z",
                        duration: 1000000,
                    },
                    contextInfo: {
                        additionalData: {
                            additionalData: "additionalData",
                        },
                    },
                },
            ],
            number: 1,
            size: 1,
            totalElements: 1000000,
            totalPages: 1,
        });
    });
});
